<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Luca Lanziani</title><link href="https://lanziani.com/" rel="alternate"></link><link href="https://lanziani.com/feeds/how-to.atom.xml" rel="self"></link><id>https://lanziani.com/</id><updated>2010-04-15T17:40:00+02:00</updated><entry><title>[Ita] cgit - web interface per gitosis</title><link href="https://lanziani.com/ita-cgit-web-interface-per-gitosis-it.html" rel="alternate"></link><updated>2010-04-15T17:40:00+02:00</updated><author><name>Luca Lanziani</name></author><id>tag:lanziani.com,2010-04-15:ita-cgit-web-interface-per-gitosis-it.html</id><summary type="html">&lt;p&gt;Dopo aver &lt;a href="https://lanziani.com/ita-gitosis-server-git-privato-it.html"&gt;configurato il mio server git&lt;/a&gt; mi sono chiesto quale fosse il modo migliore per navigare i progetti, sempre con l’aiuto di google ho scovato &lt;a href="http://hjemli.net/git/cgit/tree/README"&gt;cgit&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cgit is an attempt to create a fast web interface for the git scm, using a builtin cache to decrease server io-pressure.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Questa interfaccia è basata su: un “semplice” script cgi scritto in c&lt;/strong&gt;, un file di configurazione &lt;code&gt;/etc/cgitrc&lt;/code&gt;, un foglio di stile css e un logo.&lt;/p&gt;
&lt;p&gt;Per installare cgit su Archlinux basterà il comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;yaourt -S cgit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;che oltre a installare il man e a creare alcune cartelle utili, fornirà i seguenti file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;/etc/cgitrc
/srv/http/cgit/cgit.cgi
/srv/http/cgit/cgit.css
/srv/http/cgit/cgit.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Nella configurazione di Apache&lt;/strong&gt; di Archlinux, esiste un alias che specifica che &lt;strong&gt;all’url &lt;code&gt;/cgi-bin/&lt;/code&gt; corrisponde il percorso fisico &lt;code&gt;/srv/http/cgi-bin&lt;/code&gt;&lt;/strong&gt; dobbiamo quindi creare la directory in questione e copiarci all’interno il file &lt;code&gt;cgit.cgi&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mkdir /srv/http/cgi-bin
cp /srv/http/cgit/cgit.cgi /srv/http/cgi-bin/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;diciamo&lt;/strong&gt; quindi &lt;strong&gt;al software dove trovare il logo e il foglio di stile&lt;/strong&gt; modificando &lt;strong&gt;nel file di configurazione &lt;code&gt;/etc/cgitrc&lt;/code&gt;&lt;/strong&gt; le variabili &lt;code&gt;css&lt;/code&gt; e &lt;code&gt;logo&lt;/code&gt; come segue:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;css&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/cgit/cgit.css
&lt;span class="nv"&gt;logo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/cgit/cgit.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;in fondo allo stesso file trovate le righe&lt;/strong&gt; di esempio &lt;strong&gt;per configurare i repository da monitorare,&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;repo.url&lt;span class="o"&gt;=&lt;/span&gt;saetta
repo.path&lt;span class="o"&gt;=&lt;/span&gt;/tmp/saetta.git
repo.desc&lt;span class="o"&gt;=&lt;/span&gt;the master foo repository
repo.owner&lt;span class="o"&gt;=&lt;/span&gt;fooman@foobar.com
repo.readme&lt;span class="o"&gt;=&lt;/span&gt;info/web/about.html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Inseriamo quindi un alias &lt;strong&gt;nel file &lt;code&gt;/etc/httpd/conf/httpd.conf&lt;/code&gt;&lt;/strong&gt; che richiami lo script cgit.cgi quando visitiamo l’indirizzo “http://dominio-git/git”:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ScriptAlias /git &lt;span class="s2"&gt;&amp;quot;/srv/http/cgi-bin/cgit.cgi&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;e riavviamo il server apache.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Per vedere il risultato visitate &lt;em&gt;http://vostrodominio/git&lt;/em&gt; e dovreste trovarvi un’interfaccia simile a quella del &lt;a href="http://hjemli.net/git/cgit/tree/README"&gt;progetto stesso&lt;/a&gt; :D&lt;/p&gt;</summary><category term="git"></category><category term="server"></category><category term="linux"></category><category term="it"></category><category term="gitosis"></category><category term="cgit"></category></entry><entry><title>[Ita] Gitosis - server git privato</title><link href="https://lanziani.com/ita-gitosis-server-git-privato-it.html" rel="alternate"></link><updated>2010-04-14T14:10:00+02:00</updated><author><name>Luca Lanziani</name></author><id>tag:lanziani.com,2010-04-14:ita-gitosis-server-git-privato-it.html</id><summary type="html">&lt;p&gt;Ho necessita qualche volta di gestire in maniera flessibile lo sviluppo del software che scrivo utilizzando &lt;a href="http://git-scm.com/"&gt;git&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Git is a free &amp;amp; open source, distributed version control system designed to handle everything from small to very large projects with speed and efficiency.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Spesso per fare ciò mi affido a qualche servizio esterno ma avendo a disposizione un server personale mi sono chiesto, perché non sfruttarlo anche a questo scopo?&lt;/p&gt;
&lt;p&gt;Cercando ho trovato &lt;a href="http://www.ohloh.net/p/gitosis"&gt;gittosis&lt;/a&gt;,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;gitosis aims to make hosting git repos easier and safer. It manages multiple repositories under one user account, using SSH keys to identify users. End users do not need shell accounts on the server, they will talk to one shared account that will not let them run arbitrary commands.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ho distillato qui i passi per la configurazione prendendo spunto da questa &lt;a href="http://scie.nti.st/2007/11/14/hosting-git-repositories-the-easy-and-secure-way"&gt;guida&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Installare&lt;/h2&gt;
&lt;h3&gt;Archlinux way&lt;/h3&gt;
&lt;p&gt;Per installare il software basterà lanciare sul server il semplice comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;yaourt -S gitosis-git gitosis-scripts
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In questo modo verranno installati il software con alcuni script aggiuntivi e inoltre verrà creato un utente “git” ed un gruppo omonimo.&lt;/p&gt;
&lt;h3&gt;Le altre distribuzioni&lt;/h3&gt;
&lt;p&gt;E' necessario installare il software e creare utente e gruppo a mano (l’utente deve avere una shell e una home ma non una password)&lt;/p&gt;
&lt;h2&gt;Configurare&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Sul vostro Client&lt;/strong&gt; (il computer da cui sviluppate) create le chiavi ssh per il vostro utente con il comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ssh-keygen -t rsa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;e copiate il file &lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;, creato da quel comando, sul server.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Sul server&lt;/strong&gt; tramite l’utente “git” (basterà diventare root e usare il comando su git, oppure usare sudo) lanceremo il comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;gitosis-init &amp;lt; /tmp/id_rsa.pub
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Questo comando creerà le directory "gitosis" e "repositories" nella home dell'utente "git" e aggiungerà la chiave pubblica del client tra quelle autorizzate.&lt;/p&gt;
&lt;p&gt;Per una maggiore sicurezza è anche consigliato settare i permessi di esecuzione al file "post-update" con il comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;chmod &lt;span class="m"&gt;755&lt;/span&gt; /home/git/repositories/gitosis-admin.git/hooks/post-update
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;basterà ora lanciare sul client il comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;git clone git@YOUR_SERVER_HOSTNAME:gitosis-admin.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;e dovreste trovarvi la directory "gitosis-admin" sincronizzata in locale.&lt;/p&gt;
&lt;p&gt;Probabilmente "tradurrò" anche il resto della guida appena ho tempo, per ora mi fermo qui.&lt;/p&gt;
&lt;p&gt;Saluti, Nss&lt;/p&gt;</summary><category term="git"></category><category term="server"></category><category term="linux"></category><category term="it"></category><category term="gitosis"></category></entry></feed>